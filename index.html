<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>×‘×“×™×§×” ×§×¦×¨×” ×œ×–×›×•×™×•×ª ××—×¨×™ ×¤×’×™×¢×” ×‘×¢×‘×•×“×”</title>
  <meta name="description" content="×‘×“×™×§×” ×§×¦×¨×” ×•×œ× ××—×™×™×‘×ª ×©××¡×“×¨×ª ××ª ×”×ª××•× ×” ××—×¨×™ ×¤×’×™×¢×” ×‘×¢×‘×•×“×”. ×“×™×¡×§×¨×˜×™, ×× ×•×©×™, ×‘×¢×¨×š 2 ×“×§×•×ª." />

  <style>
    :root{
      --bgTop:#0b1220;
      --bg:#f3f6fb;

      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --line:#e2e8f0;

      --primary:#2563eb;
      --primary2:#0ea5e9;
      --ok:#16a34a;
      --bad:#dc2626;
      --warn:#f59e0b;

      --r:18px;
      --shadow: 0 18px 55px rgba(2,6,23,.20);
      --shadow2: 0 10px 26px rgba(2,6,23,.10);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1100px 680px at 80% -10%, rgba(14,165,233,.28), transparent 55%),
        radial-gradient(900px 650px at 10% 0%, rgba(34,197,94,.18), transparent 55%),
        radial-gradient(900px 650px at 50% 120%, rgba(249,115,22,.14), transparent 55%),
        linear-gradient(180deg, var(--bgTop) 0%, var(--bgTop) 28%, var(--bg) 28%, var(--bg) 100%);
      line-height: 1.65;
    }

    .wrap{ max-width: 1040px; margin: 0 auto; padding: 22px 16px 90px; }

    .header{
      color:#fff;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom: 14px;
    }
    .brand{ display:flex; align-items:center; gap:10px; font-weight: 950; letter-spacing:-.3px; }
    .logo{
      width:40px; height:40px; border-radius: 14px;
      background: linear-gradient(135deg, rgba(255,255,255,.95), rgba(255,255,255,.65));
      box-shadow: 0 18px 40px rgba(0,0,0,.18);
      display:grid; place-items:center;
      color:#0b1220;
      font-weight: 1000;
    }
    .chips{ display:flex; gap:10px; flex-wrap:wrap; }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius: 999px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.18);
      color: rgba(255,255,255,.92);
      font-size: 12px; font-weight: 950;
      backdrop-filter: blur(8px);
    }
    .dot{ width:8px; height:8px; border-radius: 99px; background: #86efac; }

    .shell{
      margin-top: 8px;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(255,255,255,.55);
      border-radius: 26px;
      padding: 16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
    }
    @media (max-width: 940px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      padding: 22px;
      box-shadow: var(--shadow2);
    }

    h1{ margin: 0 0 10px; font-size: 34px; line-height: 1.15; letter-spacing: -.5px; }
    .lead{ margin: 0 0 16px; color: var(--muted); font-size: 16.5px; max-width: 62ch; }

    .heroRow{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; margin-top: 10px; }
    .btn{
      border:0; cursor:pointer;
      border-radius: 16px;
      padding: 14px 18px;
      font-weight: 1000;
      font-size: 16px;
      color:#fff;
      background: linear-gradient(135deg, var(--primary), var(--primary2));
      box-shadow: 0 16px 30px rgba(37,99,235,.20);
      transition: transform .15s ease, filter .15s ease;
      min-width: 240px;
    }
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.02); }
    .btn:disabled{ opacity:.6; cursor:not-allowed; transform:none; }
    .btnGhost{
      border-radius: 16px;
      padding: 14px 18px;
      font-weight: 1000;
      font-size: 16px;
      background: #fff;
      color: var(--text);
      border: 1px solid rgba(203,213,225,.95);
      cursor:pointer;
      min-width: 240px;
    }

    .trustStrip{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 14px;
    }
    @media (max-width: 940px){ .trustStrip{ grid-template-columns: 1fr; } }
    .trust{
      border-radius: 16px;
      padding: 12px;
      border: 1px solid rgba(226,232,240,.95);
      background: linear-gradient(180deg, #ffffff, #fbfdff);
      display:flex; gap:10px; align-items:flex-start;
    }
    .ico{
      width:34px; height:34px; border-radius: 14px;
      background: #f1f5ff;
      display:grid; place-items:center;
      color: #1d4ed8;
      font-weight: 1000;
      flex: 0 0 auto;
    }
    .trust b{ display:block; margin-bottom: 2px; }
    .trust span{ color: var(--muted); font-size: 13px; }

    .divider{ height:1px; background: rgba(226,232,240,.95); margin: 16px 0; }

    .kicker{
      margin: 0 0 10px;
      font-size: 12px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: #64748b;
      font-weight: 1000;
    }
    .steps{ margin:0; padding:0; list-style:none; display:flex; flex-direction:column; gap:10px; }
    .step{
      border:1px solid rgba(226,232,240,.95);
      border-radius: 16px;
      padding: 12px;
      background: #fff;
      display:flex; gap:10px; align-items:flex-start;
    }
    .num{
      width:28px;height:28px;border-radius: 11px;
      display:flex;align-items:center;justify-content:center;
      background: rgba(14,165,233,.10);
      color: #0369a1;
      font-weight: 1000;
      flex: 0 0 auto;
    }
    .step p{ margin:0; color: var(--muted); font-size: 13px; }

    details{
      border:1px solid rgba(226,232,240,.95);
      border-radius: 16px;
      background: #fff;
      padding: 12px 14px;
      margin: 10px 0;
    }
    summary{ cursor:pointer; font-weight: 1000; color: var(--text); list-style:none; }
    summary::-webkit-details-marker{ display:none; }
    details p{ margin: 8px 0 0; color: var(--muted); font-size: 13px; }

    .mini{ margin-top: 12px; color: #64748b; font-size: 12px; }

    .hidden{ display:none !important; }

    /* QUIZ */
    .quizTop{
      display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(203,213,225,.95);
      background: #f8fafc;
      font-weight: 1000;
      font-size: 12px;
      color: var(--text);
    }
    .badgeGold{ background:#fff7ed; border-color:#fed7aa; color:#9a3412; }
    .badgeHigh{ background:#f0f9ff; border-color:#bae6fd; color:#075985; }
    .badgeMed{ background:#f5f3ff; border-color:#ddd6fe; color:#5b21b6; }
    .badgeLow{ background:#f8fafc; border-color:#e2e8f0; color:#334155; }

    .progressText{ font-size: 12px; color: var(--muted); font-weight: 1000; }
    .bar{ height: 10px; background: rgba(226,232,240,.95); border-radius: 999px; overflow:hidden; margin: 10px 0 16px; }
    .fill{ height:100%; width:0%; background: linear-gradient(90deg, var(--primary), var(--primary2), #22c55e); transition: width .25s ease; }

    .qTitle{ margin:0 0 8px; font-size: 20px; letter-spacing: -.1px; }
    .hint{ margin:0 0 10px; color: var(--muted); font-size: 13px; font-weight: 950; }

    .option{
      display:flex; align-items:flex-start; gap: 12px;
      padding: 14px; margin: 10px 0;
      border-radius: 16px;
      border: 1px solid rgba(203,213,225,.95);
      background: #fff;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .option:hover{ transform: translateY(-1px); border-color: rgba(37,99,235,.35); background: #f8fbff; }
    .option input{ width:18px; height:18px; margin-top:2px; cursor:pointer; }
    .option label{ cursor:pointer; font-weight: 1000; flex:1; }

    .actions{ display:flex; gap:12px; flex-wrap:wrap; margin-top: 12px; }
    .actions button{ flex: 1 1 200px; }

    .err,.ok,.info{
      display:none;
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 16px;
      font-weight: 1000;
      font-size: 13px;
      border: 1px solid;
    }
    .err{ background:#fef2f2; border-color:#fecaca; color: var(--bad); }
    .ok{ background:#f0fdf4; border-color:#bbf7d0; color: var(--ok); }
    .info{ background:#fffbeb; border-color:#fde68a; color:#92400e; display:none; }

    /* CONTACT */
    .field label{ display:block; font-weight: 1000; margin: 10px 0 6px; }
    input[type="text"], input[type="tel"], select{
      width:100%;
      padding: 14px;
      border-radius: 16px;
      border: 1px solid rgba(203,213,225,.95);
      background: #fff;
      font-size: 16px;
      outline:none;
    }
    input:focus, select:focus{
      border-color: rgba(37,99,235,.55);
      box-shadow: 0 0 0 4px rgba(37,99,235,.12);
    }

    .sticky{
      position: fixed;
      left: 12px; right: 12px; bottom: 12px;
      display:none;
      z-index: 50;
    }
    @media (max-width: 940px){
      .sticky{ display:block; }
      .sticky .btn{ width:100%; min-width:auto; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <div class="brand">
        <div class="logo">âœ“</div>
        <div>×‘×“×™×§×” ×§×¦×¨×” ××—×¨×™ ×¤×’×™×¢×” ×‘×¢×‘×•×“×”</div>
      </div>
      <div class="chips">
        <span class="chip"><span class="dot"></span> ×œ×œ× ×”×ª×—×™×™×‘×•×ª</span>
        <span class="chip">ğŸ”’ ×“×™×¡×§×¨×˜×™</span>
        <span class="chip">â± ×‘×¢×¨×š 2 ×“×§×•×ª</span>
      </div>
    </div>

    <div class="shell">

      <!-- LANDING -->
      <div id="landing" class="grid">
        <div class="card">
          <h1>× ×¤×’×¢×ª ×‘×¢×‘×•×“×”? ×‘×•××™ × ×¢×©×” ×¡×“×¨ ×¨×’×¢.</h1>
          <p class="lead">
            ×–×” ×œ× ×˜×•×¤×¡ ××¤×—×™×“ ×•×œ× â€œ××©×¤×˜×™â€. ×¨×§ ×›××” ×©××œ×•×ª ×§×¦×¨×•×ª ×©××¡×“×¨×•×ª ××ª ×”×ª××•× ×”:
            <b>×˜×¨×™×•×ª</b>, <b>×”×©×¤×¢×”</b>, ×•Ö¾<b>×ª×™×¢×•×“</b> â€” ×›×“×™ ×œ×”×‘×™×Ÿ ×× ×™×© ×”×™×ª×›× ×•×ª ×œ×¤×™×¦×•×™ ×•××” ×›×“××™ ×œ×¢×©×•×ª ×¢×›×©×™×•.
          </p>

          <div class="heroRow">
            <button class="btn" id="startBtn" type="button">××ª×—×™×œ×™× ×‘×“×™×§×”</button>
            <button class="btnGhost" id="toFaqBtn" type="button">×¨×•×¦×” ×œ×”×‘×™×Ÿ ×œ×¤× ×™</button>
          </div>

          <div class="trustStrip">
            <div class="trust">
              <div class="ico">ğŸ§ </div>
              <div><b>×‘×¨×•×¨ ×•×¤×©×•×˜</b><span>×‘×œ×™ ××™×œ×™× ××¡×•×‘×›×•×ª.</span></div>
            </div>
            <div class="trust">
              <div class="ico">ğŸ¤</div>
              <div><b>×× ×•×©×™</b><span>×’× ×× ××ª ×œ× ×‘×˜×•×—×” ×©×–×” â€œ× ×—×©×‘â€.</span></div>
            </div>
            <div class="trust">
              <div class="ico">ğŸ›¡ï¸</div>
              <div><b>×“×™×¡×§×¨×˜×™</b><span>××ª ×‘×•×—×¨×ª ×× ×œ×”×©××™×¨ ×¤×¨×˜×™× ×‘×¡×•×£.</span></div>
            </div>
          </div>

          <div class="divider"></div>

          <div id="faq">
            <div class="kicker">×©××œ×•×ª × ×¤×•×¦×•×ª</div>
            <details>
              <summary>×–×” ××—×™×™×‘ ××•×ª×™ ×œ×¤× ×•×ª ×œ×¢×•×´×“?</summary>
              <p>×œ×. ×–×• ×‘×“×™×§×” ×¨××©×•× ×™×ª ×‘×œ×‘×“. ××™ ×©×¨×•×¦×” â€” ××©××™×¨×” ×¤×¨×˜×™× ×‘×¡×•×£ ×œ×©×™×—×” ×§×¦×¨×” ×©×¢×•×©×” ×¡×“×¨.</p>
            </details>
            <details>
              <summary>×œ××” ××ª× ×©×•××œ×™× ×¢×œ ×ª×™×¢×•×“?</summary>
              <p>×›×™ ×ª×™×¢×•×“ ×¨×¤×•××™/×“×™×•×•×— ×œ××¢×¡×™×§ ×¢×•×–×¨×™× ×œ×”×‘×™×Ÿ ××”×¨ ×× ×™×© ×‘×¡×™×¡, ×•×—×•×¡×›×™× ×œ×š ×–××Ÿ.</p>
            </details>
            <details>
              <summary>××” ×§×•×¨×” ××—×¨×™ ×©×× ×™ ××©××™×¨×” ×¤×¨×˜×™×?</summary>
              <p>×”××™×“×¢ × ×©×œ×— ×œ××¢×¨×›×ª ×©×œ×š (Make) ×›×“×™ ×©××¤×©×¨ ×™×”×™×” ×œ×—×–×•×¨ ×œ×¤×•× ×” ×•×œ×ª×× ×©×™×—×” ×¨×’×•×¢×” ×•×‘×¨×•×¨×”.</p>
            </details>
          </div>

          <div class="mini">*×”××™×“×¢ × ×•×¢×“ ×œ×”×›×•×•× ×” ×¨××©×•× ×™×ª ×‘×œ×‘×“ ×•××™× ×• ×™×™×¢×•×¥ ××©×¤×˜×™.</div>
        </div>

        <div class="card">
          <div class="kicker">××™×š ×–×” ×¢×•×‘×“</div>
          <ul class="steps">
            <li class="step"><div class="num">1</div><p>×××œ××™× 5 ×©××œ×•×ª ×§×¦×¨×•×ª.</p></li>
            <li class="step"><div class="num">2</div><p>×× ×—× ×• ×‘×•× ×™× â€œ×ª××•× ×”â€ ×¨××©×•× ×™×ª ×©×œ ×”××§×¨×”.</p></li>
            <li class="step"><div class="num">3</div><p>×‘×¡×•×£ â€” ××™ ×©×¨×•×¦×”, ××©××™×¨×” ×¤×¨×˜×™× ×œ×©×™×—×” ×©××¡×“×¨×ª ×”×›×œ.</p></li>
          </ul>

          <div class="divider"></div>

          <p class="mini">
            ×˜×™×¤: ×× ×–×” ×§×¨×” â€œ×œ× ××–××Ÿâ€ ×•×™×© ×ª×™×¢×•×“ â€” ×‘×“×¨×š ×›×œ×œ ×§×œ ×™×•×ª×¨ ×œ×”×ª×§×“× × ×›×•×Ÿ.
          </p>
        </div>
      </div>

      <!-- QUIZ -->
      <div id="quiz" class="card hidden">
        <div class="quizTop">
          <span id="leadBadge" class="badge badgeLow">××™×›×•×ª ×¤× ×™×™×”: â€”</span>
          <span id="progressTxt" class="progressText">×©××œ×” 1 ××ª×•×š 6</span>
        </div>
        <div class="bar"><div id="progressFill" class="fill"></div></div>

        <h2 id="qTitle" class="qTitle"></h2>
        <div id="qHint" class="hint"></div>
        <form id="qForm"></form>

        <div class="actions">
          <button class="btnGhost" id="backBtn" type="button">××—×•×¨×”</button>
          <button class="btn" id="nextBtn" type="button">×”××©×š</button>
        </div>

        <div id="errBox" class="err"></div>
        <div id="infoBox" class="info"></div>
      </div>

      <!-- SUMMARY + CONTACT -->
      <div id="done" class="card hidden">
        <h2 style="margin:0 0 8px;font-size:22px;">×¡×™×›×•× ×§×¦×¨ ×œ×¤×™ ××” ×©××™×œ××ª âœ…</h2>
        <div id="summaryBox" class="mini" style="font-size:14px;color:var(--text);"></div>

        <div class="divider"></div>

        <p class="lead" style="margin:0 0 10px;">
          ×× ×ª×¨×¦×™/×” â€” ××¤×©×¨ ×œ×”×©××™×¨ ×¤×¨×˜×™× ×œ×©×™×—×” ×§×¦×¨×” ×©×¢×•×©×” ×¡×“×¨ ×‘×–×›×•×™×•×ª ×•×‘×¦×¢×“×™× ×”×‘××™×. ×‘×œ×™ ×”×ª×—×™×™×‘×•×ª.
        </p>

        <div class="field">
          <label for="fullName">×©× ××œ×</label>
          <input type="text" id="fullName" placeholder="×œ×“×•×’××”: ×‘×¨ ×›×”×Ÿ" />
        </div>

        <div class="field">
          <label for="phone">×˜×œ×¤×•×Ÿ</label>
          <input type="tel" id="phone" placeholder="05X-XXXXXXX" />
        </div>

        <div class="field">
          <label for="prefTime">××ª×™ ×”×›×™ × ×•×— ×œ×“×‘×¨? (××•×¤×¦×™×•× ×œ×™)</label>
          <select id="prefTime">
            <option value="">×œ×‘×—×™×¨×”</option>
            <option>×‘×•×§×¨</option>
            <option>×¦×”×¨×™×™×</option>
            <option>××—×¨ ×”×¦×”×¨×™×™×</option>
            <option>×¢×¨×‘</option>
          </select>
        </div>

        <p class="mini">×‘×œ×—×™×¦×” ×¢×œ ×”×›×¤×ª×•×¨, ×”×¤×¨×˜×™× ×•×”×¡×™×›×•× × ×©×œ×—×™× ×œÖ¾Make Webhook ×©×œ×š.</p>

        <button class="btn" id="submitBtn" type="button">×¨×•×¦×” ×©×™×—×–×¨×• ××œ×™×™ ×•×™×¢×©×• ×œ×™ ×¡×“×¨</button>
        <div id="submitErr" class="err"></div>
        <div id="submitOk" class="ok"></div>

        <div class="divider"></div>
        <button class="btnGhost" id="restartBtn" type="button">××™×œ×•×™ ××—×“×©</button>
      </div>

    </div>
  </div>

  <div class="sticky">
    <button class="btn" id="stickyStart" type="button">××ª×—×™×œ×™× ×‘×“×™×§×”</button>
  </div>

<script>
  // ====== ×”×“×‘×™×§×™ ×›××Ÿ Webhook ×©×œ Make ======
  const WEBHOOK_URL = "PASTE_YOUR_WEBHOOK_URL_HERE";

  document.addEventListener("DOMContentLoaded", () => {
    const landingEl = document.getElementById("landing");
    const quizEl = document.getElementById("quiz");
    const doneEl = document.getElementById("done");

    const startBtn = document.getElementById("startBtn");
    const stickyStart = document.getElementById("stickyStart");
    const toFaqBtn = document.getElementById("toFaqBtn");

    const backBtn = document.getElementById("backBtn");
    const nextBtn = document.getElementById("nextBtn");

    const qTitle = document.getElementById("qTitle");
    const qHint  = document.getElementById("qHint");
    const qForm  = document.getElementById("qForm");

    const errBox = document.getElementById("errBox");
    const infoBox = document.getElementById("infoBox");

    const progressTxt = document.getElementById("progressTxt");
    const progressFill = document.getElementById("progressFill");
    const leadBadge = document.getElementById("leadBadge");

    const submitBtn = document.getElementById("submitBtn");
    const restartBtn = document.getElementById("restartBtn");
    const submitErr = document.getElementById("submitErr");
    const submitOk  = document.getElementById("submitOk");
    const summaryBox = document.getElementById("summaryBox");

    const state = {
      step: 0,
      answers: {
        q1_whenContext: null,
        q2_whenTime: null,
        q3_impact: null,
        q4_docs: [],
        q5_process: null
      }
    };

    const steps = [
      {
        id: "q1",
        title: "××ª×™ ×–×” ×§×¨×”? (×‘×–××Ÿ ×”×¢×‘×•×“×” / ×‘×“×¨×š ××œ×™×” / ×‘×—×–×¨×” ××× ×”)",
        hint: "×× ××ª ×œ× ×‘×˜×•×—×” â€” ×–×” ×‘×¡×“×¨.",
        type: "single",
        key: "q1_whenContext",
        options: [
          { label: "×›×Ÿ", value: "yes" },
          { label: "×œ×", value: "no" },
          { label: "×× ×™ ×œ× ×‘×˜×•×—×”", value: "unsure" }
        ],
        validate: (v) => !!v
      },
      {
        id: "q2",
        title: "××ª×™ ×‘×¢×¨×š ×§×¨×ª×” ×”×¤×’×™×¢×”?",
        hint: "",
        type: "single",
        key: "q2_whenTime",
        options: [
          { label: "×××© ×¢×›×©×™×• (×‘Ö¾7 ×”×™××™× ×”××—×¨×•× ×™×)", value: 0 },
          { label: "×‘×—×•×“×©×™× ×”××—×¨×•× ×™×", value: 1 },
          { label: "×œ×¤× ×™ ×©× ×” ××• ×™×•×ª×¨", value: 2 },
          { label: "×œ×¤× ×™ ×™×•×ª×¨ ×Ö¾3 ×©× ×™×", value: 3 }
        ],
        validate: (v) => v !== null && v !== undefined
      },
      {
        id: "q3",
        title: "××™×š ×–×” ×”×©×¤×™×¢ ×¢×œ×™×š ×××–?",
        hint: "×‘×—×¨×™ ××ª ××” ×©×”×›×™ ×§×¨×•×‘ ×œ××¦×‘ ×©×œ×š.",
        type: "single",
        key: "q3_impact",
        options: [
          { label: "×”×™×” × ×™×ª×•×— / ×©×™×§×•× ××¨×•×š", value: 0 },
          { label: "×˜×™×¤×•×œ ××©××¢×•×ª×™ (××™×•×Ÿ / ××©×¤×•×– / ×‘×“×™×§×•×ª)", value: 1 },
          { label: "×™××™ ××—×œ×” ×•×œ× ×—×–×¨×ª×™ ××™×“", value: 2 },
          { label: "×—×–×¨×ª×™ ××‘×œ ×¢× ×›××‘×™×/××’×‘×œ×•×ª", value: 3 },
          { label: "×¤×’×™×¢×” ×§×œ×” ×•×—×–×¨×ª×™ ××”×¨ ×œ×©×’×¨×”", value: 4 }
        ],
        validate: (v) => v !== null && v !== undefined
      },
      {
        id: "q4",
        title: "×™×© ×œ×š ××™×–×©×”×• ×ª×™×¢×•×“?",
        hint: "××¤×©×¨ ×œ×‘×—×•×¨ ×™×•×ª×¨ ××ª×©×•×‘×” ××—×ª",
        type: "multi",
        key: "q4_docs",
        options: [
          { label: "×ª×™×¢×•×“ ×¨×¤×•××™ (××™×•×Ÿ / ×¨×•×¤× / ×‘×“×™×§×•×ª)", value: "medical" },
          { label: "×“×™×•×•×—×ª×™ ×œ××¢×¡×™×§", value: "employer" },
          { label: "×™×© ×¢×“×™×/×ª××•× ×•×ª/×“×•×´×—", value: "evidence" },
          { label: "×¢×“×™×™×Ÿ ×œ×, ××‘×œ ××¤×©×¨ ×œ×”×©×™×’", value: "can_get" },
          { label: "××™×Ÿ ×ª×™×¢×•×“ ×›×¨×’×¢", value: "none" }
        ],
        validate: (v) => Array.isArray(v) && v.length > 0
      },
      {
        id: "q5",
        title: "×›×‘×¨ ×¤× ×™×ª ×œ×‘×™×˜×•×— ×œ××•××™ / ×”×ª×—×œ×ª ××©×”×•?",
        hint: "",
        type: "single",
        key: "q5_process",
        options: [
          { label: "×œ×, ×¢×“×™×™×Ÿ ×œ×", value: 0 },
          { label: "×›×Ÿ, ×¤× ×™×ª×™ ××‘×œ ×œ× ×‘×˜×•×—×” ×©×¢×©×™×ª×™ × ×›×•×Ÿ", value: 1 },
          { label: "×›×Ÿ, ×”×’×©×ª×™ ×“××™ ×¤×’×™×¢×”", value: 2 },
          { label: "×›×Ÿ, ×× ×™ ×›×‘×¨ ×‘×ª×”×œ×™×š ××ª×§×“×", value: 3 },
          { label: "×× ×™ ×œ× ×‘×˜×•×—×”", value: 4 }
        ],
        validate: (v) => v !== null && v !== undefined
      }
    ];

    function show(el){ el.classList.remove("hidden"); }
    function hide(el){ el.classList.add("hidden"); }
    function scrollTop(){ window.scrollTo({ top: 0, behavior: "smooth" }); }

    function showError(msg){ errBox.style.display="block"; errBox.textContent=msg; }
    function clearError(){ errBox.style.display="none"; errBox.textContent=""; }
    function showInfo(msg){ infoBox.style.display="block"; infoBox.textContent=msg; }
    function clearInfo(){ infoBox.style.display="none"; infoBox.textContent=""; }

    function showSubmitError(msg){ submitErr.style.display="block"; submitErr.textContent=msg; }
    function clearSubmitError(){ submitErr.style.display="none"; submitErr.textContent=""; }
    function showSubmitOk(msg){ submitOk.style.display="block"; submitOk.textContent=msg; }
    function clearSubmitOk(){ submitOk.style.display="none"; submitOk.textContent=""; }

    function computeLeadGrade(ans){
      let score = 0;

      // ×˜×¨×™×•×ª
      if (ans.q2_whenTime === 0) score += 3;
      else if (ans.q2_whenTime === 1) score += 2;
      else if (ans.q2_whenTime === 2) score += 1;
      else if (ans.q2_whenTime === 3) score -= 2;

      // ×—×•××¨×”/×”×©×¤×¢×”
      if (ans.q3_impact === 0) score += 4;
      else if (ans.q3_impact === 1) score += 3;
      else if (ans.q3_impact === 2) score += 2;
      else if (ans.q3_impact === 3) score += 1;
      else if (ans.q3_impact === 4) score -= 3;

      // ×ª×™×¢×•×“
      const docs = new Set(ans.q4_docs || []);
      if (docs.has("medical")) score += 2;
      if (docs.has("employer")) score += 2;
      if (docs.has("evidence")) score += 1;
      if (docs.has("none")) score -= 2;

      // ×ª×”×œ×™×š
      if (ans.q5_process === 0) score += 2;
      if (ans.q5_process === 1) score += 3;
      if (ans.q5_process === 2) score += 1;
      if (ans.q5_process === 3) score -= 1;
      if (ans.q5_process === 4) score += 1;

      // ×§×©×¨ ×œ×¢×‘×•×“×”
      if (ans.q1_whenContext === "no") score -= 4;
      if (ans.q1_whenContext === "yes") score += 1;

      if (score >= 9) return { tag:"Gold", score, cls:"badgeGold" };
      if (score >= 6) return { tag:"High", score, cls:"badgeHigh" };
      if (score >= 3) return { tag:"Medium", score, cls:"badgeMed" };
      return { tag:"Low", score, cls:"badgeLow" };
    }

    function summaryText(ans){
      const g = computeLeadGrade(ans);
      const docs = new Set(ans.q4_docs || []);
      const fresh = ans.q2_whenTime === 0;
      const old = ans.q2_whenTime === 3;
      const severe = ans.q3_impact === 0 || ans.q3_impact === 1;
      const light = ans.q3_impact === 4;

      // ×× ×œ× ×§×©×•×¨ ×œ×¢×‘×•×“×”
      if (ans.q1_whenContext === "no"){
        return {
          title: "× ×¨××” ×©×–×” ×œ× ×‘×”×›×¨×— × ×•×¤×œ ×ª×—×ª â€œ×ª××•× ×ª ×¢×‘×•×“×”â€.",
          bullets: [
            "×–×” ×œ× ××•××¨ ×©××™×Ÿ ××” ×œ×¢×©×•×ª â€” ×œ×¤×¢××™× ×™×© ×›×™×•×•× ×™× ××—×¨×™× (×œ××©×œ ×‘×™×˜×•×—×™×/×¦×“ ×’×³).",
            "×× ×ª×¨×¦×™, ××¤×©×¨ ×œ×”×©××™×¨ ×¤×¨×˜×™× ×œ×©×™×—×” ×§×¦×¨×” ×©×ª×›×•×•×Ÿ ××•×ª×š ×œ××¤×™×§ ×”× ×›×•×Ÿ."
          ],
          grade: g
        };
      }

      const bullets = [];
      if (fresh) bullets.push("âœ… ×”×¤× ×™×™×” ×˜×¨×™×™×” â€” ×–×” ×™×ª×¨×•×Ÿ ×’×“×•×œ ×›×“×™ ×œ× ×œ××‘×“ ×–×›×•×™×•×ª.");
      if (old) bullets.push("âš ï¸ ×¢×‘×¨ ×–××Ÿ â€” ×¢×“×™×™×Ÿ ×™×™×ª×›×Ÿ ××” ×œ×¢×©×•×ª, ××‘×œ ×—×©×•×‘ ×œ×‘×“×•×§ ××”×¨ ×›×“×™ ×œ× ×œ×¤×¡×¤×¡ ××•×¢×“×™×/×¨××™×•×ª.");
      if (severe) bullets.push("âœ… ×œ×¤×™ ×”×ª×™××•×¨, ×–×• ×¤×’×™×¢×” ××©××¢×•×ª×™×ª â€” ×‘×“×¨×š ×›×œ×œ ×–×” ××¦×“×™×§ ×‘×“×™×§×” ××§×¦×•×¢×™×ª.");
      if (light) bullets.push("â„¹ï¸ × ×©××¢ ×§×œ ×™×—×¡×™×ª â€” ×•×¢×“×™×™×Ÿ ×›×“××™ ×œ×”×‘×™×Ÿ ×× ××’×™×¢ ××©×”×• ×‘×¡×™×¡×™ (×“××™ ×¤×’×™×¢×”/×”×—×–×¨×™ ×”×•×¦××•×ª).");
      if (docs.has("medical") || docs.has("employer")) bullets.push("âœ… ×™×© ×ª×™×¢×•×“ (×¨×¤×•××™/×“×™×•×•×—) â€” ×–×” ×¢×•×–×¨ ×××•×“.");
      if (docs.has("none")) bullets.push("â„¹ï¸ ××™×Ÿ ×ª×™×¢×•×“ ×›×¨×’×¢ â€” ×‘×©×™×—×” ××¤×©×¨ ×œ×”×‘×™×Ÿ ××” ×›×“××™ ×œ×”×©×™×’ ×•××” ×—×©×•×‘ ×§×•×“×.");

      bullets.push("×”×¦×¢×“ ×”×‘× ×”×›×™ × ×›×•×Ÿ: ×©×™×—×” ×§×¦×¨×” ×©×¢×•×©×” ×¡×“×¨ ×‘×–×›×•×™×•×ª ×•×‘××” ×œ×¢×©×•×ª ×¢×›×©×™×•.");

      return { title: "×œ×¤×™ ××” ×©××™×œ××ª:", bullets, grade: g };
    }

    function updateProgress(){
      const total = steps.length + 1;
      const current = state.step + 1;
      progressTxt.textContent = `×©××œ×” ${current} ××ª×•×š ${total}`;
      progressFill.style.width = Math.round((current/total)*100) + "%";
    }

    function renderStep(){
      clearError();
      clearInfo();
      updateProgress();

      const s = steps[state.step];
      qTitle.textContent = s.title;
      qHint.textContent = s.hint || "";
      qForm.innerHTML = "";

      backBtn.disabled = state.step === 0;

      if (s.type === "single"){
        const current = state.answers[s.key];
        s.options.forEach((opt, idx) => {
          const id = `${s.id}_${idx}`;
          const w = document.createElement("div");
          w.className = "option";
          w.innerHTML = `
            <input type="radio" name="${s.id}" id="${id}" ${current === opt.value ? "checked" : ""}/>
            <label for="${id}">${opt.label}</label>
          `;
          w.addEventListener("click", () => { state.answers[s.key] = opt.value; renderStep(); });
          qForm.appendChild(w);
        });
      }

      if (s.type === "multi"){
        const current = new Set(state.answers[s.key] || []);
        s.options.forEach((opt, idx) => {
          const id = `${s.id}_${idx}`;
          const w = document.createElement("div");
          w.className = "option";
          const checked = current.has(opt.value);
          w.innerHTML = `
            <input type="checkbox" name="${s.id}" id="${id}" ${checked ? "checked" : ""}/>
            <label for="${id}">${opt.label}</label>
          `;
          w.addEventListener("click", () => {
            const now = new Set(state.answers[s.key] || []);
            if (now.has(opt.value)) now.delete(opt.value); else now.add(opt.value);

            // none ×‘×œ×¢×“×™
            if (now.has("none") && now.size > 1) { now.clear(); now.add("none"); }
            if (now.has("medical") || now.has("employer") || now.has("evidence") || now.has("can_get")) {
              if (now.has("none")) now.delete("none");
            }
            state.answers[s.key] = Array.from(now);
            renderStep();
          });
          qForm.appendChild(w);
        });
      }

      const g = computeLeadGrade(state.answers);
      leadBadge.className = `badge ${g.cls}`;
      leadBadge.textContent = `××™×›×•×ª ×¤× ×™×™×”: ${g.tag}`;
    }

    function resetAll(){
      state.step = 0;
      state.answers = { q1_whenContext:null, q2_whenTime:null, q3_impact:null, q4_docs:[], q5_process:null };
      document.getElementById("fullName").value = "";
      document.getElementById("phone").value = "";
      document.getElementById("prefTime").value = "";
      clearSubmitError(); clearSubmitOk();
      hide(doneEl); hide(quizEl); show(landingEl);
      scrollTop();
    }

    function showQuiz(){
      hide(landingEl);
      hide(doneEl);
      show(quizEl);
      state.step = 0;
      renderStep();
      scrollTop();
    }

    function showDone(){
      hide(quizEl);
      show(doneEl);
      const s = summaryText(state.answers);

      const html = `
        <div style="padding:12px 14px;border:1px solid rgba(226,232,240,.95);border-radius:16px;background:#fff;">
          <div style="font-weight:1000;margin-bottom:6px;">${s.title}</div>
          <ul style="margin:0;padding:0 18px;color:#334155;">
            ${s.bullets.map(b => `<li style="margin:6px 0;">${b}</li>`).join("")}
          </ul>
        </div>
      `;
      summaryBox.innerHTML = html;
      scrollTop();
    }

    // ====== EVENTS ======
    startBtn.addEventListener("click", showQuiz);
    stickyStart.addEventListener("click", showQuiz);
    toFaqBtn.addEventListener("click", () => document.getElementById("faq").scrollIntoView({behavior:"smooth"}));

    backBtn.addEventListener("click", () => {
      if (state.step > 0) { state.step--; renderStep(); }
    });

    nextBtn.addEventListener("click", () => {
      const s = steps[state.step];
      const v = state.answers[s.key];
      if (!s.validate(v)) return showError("×‘×‘×§×©×” ×œ×‘×—×•×¨ ×ª×©×•×‘×” ×›×“×™ ×œ×”××©×™×š.");

      // ×× ×”××©×ª××© ×‘×—×¨ "×œ×" ×‘×©××œ×” 1 â€“ ×¢×“×™×™×Ÿ ×××¤×©×¨×™× ×œ×”××©×™×š ××‘×œ ×¢× ×”×¡×‘×¨ ×§×¦×¨
      if (s.key === "q1_whenContext" && v === "no"){
        showInfo("×©×™××™ ×œ×‘: ×× ×–×” ×œ× ×§×¨×” ×‘×–××Ÿ ×”×¢×‘×•×“×”/×‘×“×¨×š ××œ×™×”/×‘×—×–×¨×” â€” ×™×™×ª×›×Ÿ ×©×–×” ×œ× â€œ×ª××•× ×ª ×¢×‘×•×“×”â€, ××‘×œ ×¢×“×™×™×Ÿ ×™×›×•×œ ×œ×”×™×•×ª ×©×™×© ×›×™×•×•×Ÿ ××—×¨. × ××©×™×š ×œ×‘×“×™×§×” ×§×¦×¨×”.");
      }

      if (state.step < steps.length - 1) { state.step++; renderStep(); }
      else { showDone(); }
    });

    restartBtn.addEventListener("click", resetAll);

    submitBtn.addEventListener("click", async () => {
      clearSubmitError(); clearSubmitOk();

      const name = document.getElementById("fullName").value.trim();
      const phoneRaw = document.getElementById("phone").value.trim();
      const phone = phoneRaw.replace(/[-\s]/g,"");
      const prefTime = document.getElementById("prefTime").value || null;

      if (!name || name.length < 2) return showSubmitError("×‘×‘×§×©×” ×œ×”×–×™×Ÿ ×©× ××œ×.");
      if (!/^0\d{8,9}$/.test(phone)) return showSubmitError("×‘×‘×§×©×” ×œ×”×–×™×Ÿ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ ×™×©×¨××œ×™ ×ª×§×™×Ÿ (05XXXXXXXX).");
      if (!WEBHOOK_URL || WEBHOOK_URL.includes("PASTE_YOUR_WEBHOOK_URL_HERE")) {
        return showSubmitError("×—×¡×¨×” ×›×ª×•×‘×ª ×©×œ×™×—×”. ×”×“×‘×™×§×™ ××ª ×”-Webhook ×©×œ Make ×‘×§×•×“.");
      }

      const grade = computeLeadGrade(state.answers);
      const summ = summaryText(state.answers);

      const payload = {
        createdAt: new Date().toISOString(),
        leadGrade: grade.tag,
        leadScore: grade.score,
        contact: { name, phone, preferredTime: prefTime },
        answers: state.answers,
        summary: { title: summ.title, bullets: summ.bullets },
        meta: { source: "pitzuy_center_best_v1", locale: "he-IL" }
      };

      submitBtn.disabled = true;
      submitBtn.textContent = "×©×•×œ×—â€¦";

      try{
        const res = await fetch(WEBHOOK_URL, {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify(payload)
        });
        if (!res.ok) throw new Error("HTTP " + res.status);

        showSubmitOk("× ×©×œ×— âœ… × ×—×–×•×¨ ×‘×”×§×“×.");
        submitBtn.textContent = "× ×©×œ×— âœ…";
      }catch(e){
        showSubmitError("×”×©×œ×™×—×” × ×›×©×œ×”. ×‘×“×§×™ ×©×”-Webhook × ×›×•×Ÿ ×•×©×”×ª×¨×—×™×© ×‘-Make ××—×›×” ×œ× ×ª×•× ×™×.");
        submitBtn.disabled = false;
        submitBtn.textContent = "×¨×•×¦×” ×©×™×—×–×¨×• ××œ×™×™ ×•×™×¢×©×• ×œ×™ ×¡×“×¨";
      }
    });
  });
</script>
</body>
</html>
